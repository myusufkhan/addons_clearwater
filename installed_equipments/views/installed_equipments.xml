<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="cw_equipments_form" model="ir.ui.view">
            <field name="name">stock.move.dates.equipments.form</field>
            <field name="model">stock.move.dates</field>
            <field name="arch" type="xml">
                <form string="Installed Equipments">
                        <header>
                            <button name="action_remove" type="object" string="Remove" class='btn-primary' attrs="{'invisible':[('state','!=','in_use')]}"/>
                            <field name="state" widget="statusbar"/>
                        </header>
                    <sheet>

                        <group>
                            <field name="product_id"/>
                        </group>
                        <group>
                            <group>
                                <field name="partner_id"/>
                                <field name="delivery_order"/>
                                <field name ="mfg_waranty_date"/>
                                <field name ="rec_d_into_inventory"/>
                                <field name ="dlr_waranty_date"/>
                            </group>
                            <group>
                                <field name="is_equipment"/>
                                <field name ="lot_id"/>
                                <field name ="originally_deployed"/>
                                <field name ="installed_at_current_location"/>
<!--                                <field name="company_id" invisible = "1"/>-->
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>



        <record id="cw_equipments_list" model="ir.ui.view">
            <field name="name">stock.move.line.list.ext</field>
            <field name="model">stock.move.dates</field>
            <field name="arch" type="xml">
                <tree string="Installed Equipments List"
                 edit="false"  decoration-info="state == 'returned'">
                    <field name="partner_id"/>
                    <field name="product_id"/>
                    <field name ="lot_id"/>
                    <field name="delivery_order"/>
                    <field name="delivery_date"/>
                    <field name ="mfg_waranty_date"/>
                    <field name ="rec_d_into_inventory"/>
                    <field name ="installed_at_current_location"/>
                    <field name ="dlr_waranty_date"/>
                    <field name ="originally_deployed"/>
                    <field name="is_equipment" invisible="1"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="action_installed_equipments" model="ir.actions.act_window">
            <field name="name">Installed Equipments</field>
            <field name="res_model">stock.move.dates</field>
            <field name="domain">[('state', 'in', ['in_use', 'removed'])]</field>
             <field name="view_id" ref="cw_equipments_list"/>
            <field name='view_mode'>tree,form</field>
        </record>

        <menuitem
            name="Equipments"
            action='action_installed_equipments'
            id='installed_equipments_menu'
            parent="sale.menu_sale_config"
            groups="sales_team.group_sale_manager"/>
             />
    </data>
</odoo>
